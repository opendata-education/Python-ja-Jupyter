
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Ohjeita Pythonin käyttöön Jupyterilla &#8212; Python ja Jupyter</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://opendata-education.github.io/Python-ja-Jupyter/intro.html/harjoitukset/Ohjeita Pythonin käyttöön.html" />
    <link rel="shortcut icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Kiinni data-analyysiin" href="data-analyysi.html" />
    <link rel="prev" title="Kaverina Python" href="kaverina_python.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Python ja Jupyter</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Tervetuloa avoimen datan pariin
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="notebookit_tutuksi.html">
   Notebookit tutuiksi
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Jupyter-aloitus.html">
     Jupyter Notebook -tutoriaali
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="kaverina_python.html">
   Kaverina Python
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Ohjeita Pythonin käyttöön Jupyterilla
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="data-analyysi.html">
   Kiinni data-analyysiin
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="jupyter-intro.html">
     Data-analyysi Pythonilla
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-analyysi_esimerkki.html">
     Harjoittele data-analyysiä
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python-funktiot.html">
     Funktiot Pythonissa
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/opendata-education/Python-ja-Jupyter/main?urlpath=tree/materiaali/harjoitukset/Ohjeita Pythonin käyttöön.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/opendata-education/Python-ja-Jupyter/blob/main/materiaali/harjoitukset/Ohjeita Pythonin käyttöön.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/opendata-education/Python-ja-Jupyter"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/opendata-education/Python-ja-Jupyter/issues/new?title=Issue%20on%20page%20%2Fharjoitukset/Ohjeita Pythonin käyttöön.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/harjoitukset/Ohjeita Pythonin käyttöön.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lahtokohdat">
   1. Lähtökohdat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#paketit">
   2. Paketit
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tietorakenteet-ja-datan-kasittely">
   3. Tietorakenteet ja datan käsittely
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#peruslaskutoimitukset-ja-syntaksilogiikka">
   4. Peruslaskutoimitukset ja syntaksilogiikka
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#satunnaisdatan-luominen">
   5. Satunnaisdatan luominen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#kuvaajien-piirtaminen">
   6. Kuvaajien piirtäminen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#animaatioiden-tekeminen">
   7. Animaatioiden tekeminen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#kartat-ja-lampokartat">
   8. Kartat ja lämpökartat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ongelmia-katso-tanne">
   9. Ongelmia? Katso tänne
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#yhyy-en-osaa">
     Yhyy, en osaa?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#solu-jai-jumiin-eika-piirra-kuvaajaani-tai-aja-koodiani">
     Solu jäi jumiin eikä piirrä kuvaajaani tai aja koodiani?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#virheilmoitus-herjaa-nimi-is-not-defined-tai-nimi-does-not-exist">
     Virheilmoitus herjaa ‘nimi is not defined’ tai ‘nimi does not exist’?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#yritan-tallentaa-muuttujaan-asioita-mutta-print-nimi-kertookin-none">
     Yritän tallentaa muuttujaan asioita, mutta print(nimi) kertookin None?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datani-ei-suostu-lataamaan">
     Datani ei suostu lataamaan?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lataamassani-datassa-on-jotain-omituisia-nan-arvoja">
     Lataamassani datassa on jotain omituisia ‘NaN’-arvoja?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#yhdistin-palasia-datasta-mutta-nyt-en-enaa-pysty-tekemaan-asioita-uudella-muuttujallani">
     Yhdistin palasia datasta, mutta nyt en enää pysty tekemään asioita uudella muuttujallani?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#koodini-ei-toimi-vaikka-se-on-ihan-varmasti-oikein-kirjoitettu">
     Koodini ei toimi, vaikka se on ihan varmasti oikein kirjoitettu?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datan-paivamaarat-sekoittavat-toiminnan-miten-korjaan">
     Datan päivämäärät sekoittavat toiminnan, miten korjaan?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#kopioin-datan-uuteen-muuttujaan-jonka-kasittelyn-jalkeen-huomaan-alkuperaisen-muuttujan-arvojen-vaihtuneen">
     Kopioin datan uuteen muuttujaan, jonka käsittelyn jälkeen huomaan alkuperäisen muuttujan arvojen vaihtuneen?
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Ohjeita Pythonin käyttöön Jupyterilla</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lahtokohdat">
   1. Lähtökohdat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#paketit">
   2. Paketit
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tietorakenteet-ja-datan-kasittely">
   3. Tietorakenteet ja datan käsittely
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#peruslaskutoimitukset-ja-syntaksilogiikka">
   4. Peruslaskutoimitukset ja syntaksilogiikka
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#satunnaisdatan-luominen">
   5. Satunnaisdatan luominen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#kuvaajien-piirtaminen">
   6. Kuvaajien piirtäminen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#animaatioiden-tekeminen">
   7. Animaatioiden tekeminen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#kartat-ja-lampokartat">
   8. Kartat ja lämpökartat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ongelmia-katso-tanne">
   9. Ongelmia? Katso tänne
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#yhyy-en-osaa">
     Yhyy, en osaa?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#solu-jai-jumiin-eika-piirra-kuvaajaani-tai-aja-koodiani">
     Solu jäi jumiin eikä piirrä kuvaajaani tai aja koodiani?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#virheilmoitus-herjaa-nimi-is-not-defined-tai-nimi-does-not-exist">
     Virheilmoitus herjaa ‘nimi is not defined’ tai ‘nimi does not exist’?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#yritan-tallentaa-muuttujaan-asioita-mutta-print-nimi-kertookin-none">
     Yritän tallentaa muuttujaan asioita, mutta print(nimi) kertookin None?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datani-ei-suostu-lataamaan">
     Datani ei suostu lataamaan?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lataamassani-datassa-on-jotain-omituisia-nan-arvoja">
     Lataamassani datassa on jotain omituisia ‘NaN’-arvoja?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#yhdistin-palasia-datasta-mutta-nyt-en-enaa-pysty-tekemaan-asioita-uudella-muuttujallani">
     Yhdistin palasia datasta, mutta nyt en enää pysty tekemään asioita uudella muuttujallani?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#koodini-ei-toimi-vaikka-se-on-ihan-varmasti-oikein-kirjoitettu">
     Koodini ei toimi, vaikka se on ihan varmasti oikein kirjoitettu?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datan-paivamaarat-sekoittavat-toiminnan-miten-korjaan">
     Datan päivämäärät sekoittavat toiminnan, miten korjaan?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#kopioin-datan-uuteen-muuttujaan-jonka-kasittelyn-jalkeen-huomaan-alkuperaisen-muuttujan-arvojen-vaihtuneen">
     Kopioin datan uuteen muuttujaan, jonka käsittelyn jälkeen huomaan alkuperäisen muuttujan arvojen vaihtuneen?
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="ohjeita-pythonin-kayttoon-jupyterilla">
<h1>Ohjeita Pythonin käyttöön Jupyterilla<a class="headerlink" href="#ohjeita-pythonin-kayttoon-jupyterilla" title="Permalink to this headline">#</a></h1>
<p>Tähän tiedostoon on koottu joitain tärkeimpiä tietoja Pythonin toiminnasta ja erilaisia funktioita joista voi olla hyötyä alkuun pääsemisessä. Mukaan on laitettu muutamia esimerkkejä niiden toiminnasta.</p>
<p>Tämän dokumentin käytöstä: on tarkoituksenmukaista ajaa ensin <strong>kohdasta 2</strong> löytyvät paketit ja sitten siirtyä sinne mitä oli etsimässä. Tästä johtuen erinäisiä funktioita, pääasiassa satunnaisgeneraattoreita, määritellään dokumentissa useassa kohtaa edestakaisin selaamisen välttämiseksi.</p>
<p>Jos et muista miten jokin toiminto näissä notebookeissa menikään, paina <strong>h</strong>-painiketta kun et ole valinnut mitään soluja ja näet listan Jupyterin pikanäppäimistä.</p>
<ol class="simple">
<li><p>Lähtökohdat</p></li>
<li><p>Paketit</p></li>
<li><p>Tietorakenteet ja datan käsittely</p></li>
<li><p>Peruslaskutoimitukset</p></li>
<li><p>Satunnaisdatan luominen</p></li>
<li><p>Kuvaajien piirtäminen</p></li>
<li><p>Animaatioiden tekeminen</p></li>
<li><p>Kartat ja lämpökartat</p></li>
<li><p>Ongelmia? Katso tänne</p></li>
</ol>
<section id="lahtokohdat">
<h2>1. Lähtökohdat<a class="headerlink" href="#lahtokohdat" title="Permalink to this headline">#</a></h2>
<p>Ohjelmoinnissa <strong>muuttujiin</strong> voidaan tallentaa erilaisia arvoja, joita halutaan käyttää tai muuttaa myöhemmin. Erilaisia muuttujatyyppejä ovat esimerkiksi kokonaisluku (int), liukuluku (float) ja merkkijono (string). Pythonissa muuttujien luominen on helppoa, sillä muuttujatyyppiä ei tarvitse erikseen määrittää.</p>
<p>Joskus ohjelmaa ajavaan ytimeen, <strong>kerneliin</strong>, jää muistiin palasia jotka haittaavat ohjelman toimintaa. Tätä sattuu aina välillä, ei hätää. Paina ylävalikoista ‘Kernel’ ja ‘Restart &amp; Clear Output’, jolloin muistissa olevat prosessit ja tulosteet pyyhitään ja voit aloittaa alusta. Tämä ei kuitenkaan vaikuta mihinkään muutoksiin tekstissä tai koodissa, eli se ei ole virheiden korjausnappi.</p>
</section>
<section id="paketit">
<h2>2. Paketit<a class="headerlink" href="#paketit" title="Permalink to this headline">#</a></h2>
<p>Python on tieteelliseen laskentaan soveltuva ohjelmointikieli, jolle on kehitetty monenlaisia eri tavalla suoritusteholtaan optimoituja toimintoja. Sen perusperiaatteisiin kuuluu erilaisten pakettien, eli funktiokirjastojen, käyttäminen. Nämä paketit tuodaan <strong>import</strong>-komennolla käyttöön ja vaikka se saattaakin alkuun tuntua hienoiselta taikatempulta tietää mitä pitäisi kutsua, se selkeytyy nopeasti.</p>
<p>Jos vilkaiset Open Data -projektissa tarjottuja materiaaleja, huomaat että jokaisessa Github-kansiossamme on mukana tekstitiedosto “requirements.txt”, jonka mukaan esimerkiksi <span class="xref myst">MyBinder</span> osaa rakentaa Jupyterille työalustan. Sieltä näkee, että tärkeimmät paketit joita tulemme käyttämään ovat seuraavat:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Oleellisimmat paketit:</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>   <span class="c1"># sisältää erilaisia datan lukemiseen liittyviä työkaluja</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>   <span class="c1"># sisältää erilaisia numeerisen laskennan työkaluja</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>  <span class="c1"># sisältää kuvaajien (plot) piirtotyökaluja</span>

<span class="c1"># Muita hyödyllisiä paketteja:</span>

<span class="kn">import</span> <span class="nn">random</span> <span class="k">as</span> <span class="nn">rand</span>   <span class="c1"># sisältää funktioita satunnaislukujen generoimiseen</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>    <span class="c1"># sisältää tieteellistä laskentaa ja tilastolaskentaa</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>    <span class="c1"># normaalijakaumatyökaluja</span>
<span class="kn">import</span> <span class="nn">matplotlib.mlab</span> <span class="k">as</span> <span class="nn">mlab</span>  <span class="c1"># lisää kuvaajatyökaluja monimutkaisempiin kuvaajiin</span>

<span class="c1"># Ei paketti, mutta oleellinen komento joka mahdollistaa tulosten näkymisen nätisti harjoitteissa:</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<p>Muista ajaa yllä oleva solu jos haluat että tämän notebookin esimerkit toimivat. Ylläolevan voisi kirjoittaa lyhemminkin ilman <strong>as</strong>-merkintää, joka nimeää paketit uudelleen, mutta sillä voidaan merkittävästi lyhentää tulevien solujen tekstejä. Jos haluat lukea paketeista tarkemmin, valitse ylempää pudotusvalikko ‘Help’ ja löydät sieltä linkkejä tarkempiin dokumentaatioihin tai muotoiluohjeisiin.</p>
<p>Paketteja on paljon muitakin ja niitä voi tarpeen mukaan googlailla lisää, jos johonkin tarvitsee. Pythonin laajan käyttäjäkunnan ansiosta verkosta löytää helposti tuhansittain esimerkkejä ja hakemistoja. <a class="reference external" href="https://stackexchange.com/">StackExchange</a> ja <a class="reference external" href="https://stackoverflow.com/">StackOverflow</a> ovat hyviä paikkoja vastausten etsimiseen.</p>
</section>
<section id="tietorakenteet-ja-datan-kasittely">
<h2>3. Tietorakenteet ja datan käsittely<a class="headerlink" href="#tietorakenteet-ja-datan-kasittely" title="Permalink to this headline">#</a></h2>
<p><strong>Kooste:</strong></p>
<p>Csv-luku <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nimi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;polku&#39;</span><span class="p">,</span> <span class="n">muotoiluargumentteja</span><span class="p">)</span>
</pre></div>
</div>
<p>Taulukon luku <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;polku&#39;</span><span class="p">,</span> <span class="n">muotoiluargumentteja</span><span class="p">)</span>
</pre></div>
</div>
<p>Sisällön tarkastelu <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nimi</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>  
</pre></div>
</div>
<p>Pituus <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">nimi</span><span class="p">)</span>  
</pre></div>
</div>
<p>Muoto <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nimi</span><span class="o">.</span><span class="n">shape</span> 
</pre></div>
</div>
<p>Sarakkeet <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nimi</span><span class="o">.</span><span class="n">sarake</span> 
<span class="n">nimi</span><span class="p">[</span><span class="s1">&#39;sarake&#39;</span><span class="p">]</span> 
</pre></div>
</div>
<p>Tietyn välin rajaus <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nimi</span><span class="p">[(</span><span class="n">nimi</span><span class="o">.</span><span class="n">arvosarake</span> <span class="o">&gt;=</span> <span class="n">alaraja</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">nimi</span><span class="o">.</span><span class="n">arvosarake</span> <span class="o">&lt;=</span> <span class="n">yläraja</span><span class="p">)]</span>  
</pre></div>
</div>
<p>Tekstin etsintä <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">vanhaNimi</span><span class="p">[</span><span class="s1">&#39;sarake&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;haettu_pätkä&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<p>Lisää sarake <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nimi</span> <span class="o">=</span> <span class="n">nimi</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">sarake</span> <span class="o">=</span> <span class="n">tiedot</span><span class="p">)</span> 
</pre></div>
</div>
<p>Poista sarakkeita <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nimi</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;sarake1&#39;</span><span class="p">,</span><span class="s1">&#39;sarake2&#39;</span><span class="o">...</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>CMS-kokeen avoin data on .csv-muotoista, eli pilkuilla erotettua tekstipuuroa (comma separated values). Tällainen tieto on hyvin helppoa lukea taulukkona tietokoneen käyttöön <em>pandas</em>-paketin avulla, jolloin koneen muistiin syntyy kaksiulotteinen ns. dataframe-muotoinen taulukko. Tarkempia tietoja <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">täällä</a>, mistä löytyy myös yksityiskohtaisempi lista eri toiminnoista joita valitulle datalle voi tehdä.</p>
<p>Helpoimmat tavat lukea data käyttöön ovat <strong>pd.read_csv</strong> ja <strong>pd.read_table</strong>. Jos data on nättiä (erottajana pilkku, otsikointi on tehty, fontit eivät sodi tervettä järkeä vastaan…), yleensä mitään lisätoimenpiteitä ei tarvita.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ladataan setti hiukkasdataa muuttujaksi ja määritetään sille haluttu nimi:</span>

<span class="n">kaksoismyonit</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../Data/Dimuon_DoubleMu.csv&#39;</span><span class="p">)</span>

<span class="c1"># Jos haluaisi käyttää suoraa urlia, sijoita tämä &#39;http://opendata.cern.ch/record/545/files/Dimuon_DoubleMu.csv&#39;</span>
<span class="c1"># nimen tilalle.</span>
</pre></div>
</div>
</div>
</div>
<p>Tällainen suora muoto hakee tiedoston, joka sijaitsee samassa kansiossa kuin käytössä oleva notebook. Tiedosto voidaan hakea myös suoraan verkko-osoitteen urlista tai toisesta kansiosta <strong>‘../kansio/tiedosto.csv’</strong> -rakenteella.</p>
<p>Mikäli data on toisessa tekstimuodossa, voi kokeilla yleisempää <strong>read_table</strong> -käskyä, joka ymmärtää muitakin taulukoitavia tekstejä. Yleisin ongelma on, että teksti on eroteltu jollain muulla kuin pilkulla, kuten tabulaattorilla tai puolipisteellä. Tällöin komentoon voi laittaa argumentin <strong>sep = ‘x’</strong>, missä x on erottimena käytetty merkki. Toinen yleinen ongelma on, että tiedoston rivitys alkaa omituisesti tai sarakkeiden otsikot ovat jossain muualla kuin ensimmäisellä rivillä. Tällöin voidaan laittaa komentoon argumentti <strong>header = n</strong>, missä n on otsikoiksi halutun rivin järjestysnumero. HUOM! Tietokone aloittaa järjestysluvut aina nollasta jollei toisin mainita.</p>
<p>Tarkempia tietoja mahdollisista argumenteista <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">täällä</a>.</p>
<p>Alla esimerkki datasta, jolla ei ole otsikkoriviä. Datassa näkyy Auringosta tehtyjä havaintoja vuodesta 1992 eteenpäin ja tarkemmat selosteet kunkin sarakkeen merkityksille löytyvät <a class="reference external" href="http://sidc.oma.be/silso/infosndhem">täältä</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ladataan setti aurinkodataa ja nimetään se halutulla tavalla:</span>

<span class="n">aurinko</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;http://sidc.oma.be/silso/INFO/sndhemcsv.php&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Selkeyden vuoksi katsotaan miltä datamme näyttävät. Tähän sopii erinomaisesti <strong>nimi.head(n)</strong>-komento, joka näyttää n ensimmäistä riviä valitusta datasta. Oletusarvoisesti n = 5, jos laittaa tyhjät sulkeet.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Run</th>
      <th>Event</th>
      <th>type1</th>
      <th>E1</th>
      <th>px1</th>
      <th>py1</th>
      <th>pz1</th>
      <th>pt1</th>
      <th>eta1</th>
      <th>phi1</th>
      <th>...</th>
      <th>type2</th>
      <th>E2</th>
      <th>px2</th>
      <th>py2</th>
      <th>pz2</th>
      <th>pt2</th>
      <th>eta2</th>
      <th>phi2</th>
      <th>Q2</th>
      <th>M</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>165617</td>
      <td>74601703</td>
      <td>G</td>
      <td>9.6987</td>
      <td>-9.5104</td>
      <td>0.3662</td>
      <td>1.8633</td>
      <td>9.5175</td>
      <td>0.1945</td>
      <td>3.1031</td>
      <td>...</td>
      <td>G</td>
      <td>9.7633</td>
      <td>7.3277</td>
      <td>-1.1524</td>
      <td>6.3473</td>
      <td>7.4178</td>
      <td>0.7756</td>
      <td>-0.1560</td>
      <td>1</td>
      <td>17.4922</td>
    </tr>
    <tr>
      <th>1</th>
      <td>165617</td>
      <td>75100943</td>
      <td>G</td>
      <td>6.2039</td>
      <td>-4.2666</td>
      <td>0.4565</td>
      <td>-4.4793</td>
      <td>4.2910</td>
      <td>-0.9121</td>
      <td>3.0350</td>
      <td>...</td>
      <td>G</td>
      <td>9.6690</td>
      <td>7.2740</td>
      <td>-2.8211</td>
      <td>-5.7104</td>
      <td>7.8019</td>
      <td>-0.6786</td>
      <td>-0.3700</td>
      <td>1</td>
      <td>11.5534</td>
    </tr>
    <tr>
      <th>2</th>
      <td>165617</td>
      <td>75587682</td>
      <td>G</td>
      <td>19.2892</td>
      <td>-4.2121</td>
      <td>-0.6516</td>
      <td>18.8121</td>
      <td>4.2622</td>
      <td>2.1905</td>
      <td>-2.9881</td>
      <td>...</td>
      <td>G</td>
      <td>9.8244</td>
      <td>4.3439</td>
      <td>-0.4735</td>
      <td>8.7985</td>
      <td>4.3697</td>
      <td>1.4497</td>
      <td>-0.1086</td>
      <td>1</td>
      <td>9.1636</td>
    </tr>
    <tr>
      <th>3</th>
      <td>165617</td>
      <td>75660978</td>
      <td>G</td>
      <td>7.0427</td>
      <td>-6.3268</td>
      <td>-0.2685</td>
      <td>3.0802</td>
      <td>6.3325</td>
      <td>0.4690</td>
      <td>-3.0992</td>
      <td>...</td>
      <td>G</td>
      <td>5.5857</td>
      <td>4.4748</td>
      <td>0.8489</td>
      <td>-3.2319</td>
      <td>4.5546</td>
      <td>-0.6605</td>
      <td>0.1875</td>
      <td>1</td>
      <td>12.4774</td>
    </tr>
    <tr>
      <th>4</th>
      <td>165617</td>
      <td>75947690</td>
      <td>G</td>
      <td>7.2751</td>
      <td>0.1030</td>
      <td>-5.5331</td>
      <td>-4.7212</td>
      <td>5.5340</td>
      <td>-0.7736</td>
      <td>-1.5522</td>
      <td>...</td>
      <td>G</td>
      <td>7.3181</td>
      <td>-0.3988</td>
      <td>6.9408</td>
      <td>2.2825</td>
      <td>6.9523</td>
      <td>0.3227</td>
      <td>1.6282</td>
      <td>1</td>
      <td>14.3159</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 21 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aurinko</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1992</th>
      <th>01</th>
      <th>01.1</th>
      <th>1992.001</th>
      <th>186</th>
      <th>0</th>
      <th>186</th>
      <th>14.3</th>
      <th>1.0</th>
      <th>14.3</th>
      <th>19</th>
      <th>-1</th>
      <th>-1.1</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1992</td>
      <td>1</td>
      <td>2</td>
      <td>1992.004</td>
      <td>190</td>
      <td>18</td>
      <td>172</td>
      <td>8.2</td>
      <td>2.6</td>
      <td>7.8</td>
      <td>21</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1992</td>
      <td>1</td>
      <td>3</td>
      <td>1992.007</td>
      <td>234</td>
      <td>26</td>
      <td>208</td>
      <td>18.3</td>
      <td>6.1</td>
      <td>17.2</td>
      <td>21</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1992</td>
      <td>1</td>
      <td>4</td>
      <td>1992.010</td>
      <td>243</td>
      <td>54</td>
      <td>189</td>
      <td>14.8</td>
      <td>7.0</td>
      <td>13.0</td>
      <td>20</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1992</td>
      <td>1</td>
      <td>5</td>
      <td>1992.012</td>
      <td>242</td>
      <td>58</td>
      <td>184</td>
      <td>13.8</td>
      <td>6.8</td>
      <td>12.0</td>
      <td>18</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1992</td>
      <td>1</td>
      <td>6</td>
      <td>1992.015</td>
      <td>245</td>
      <td>79</td>
      <td>166</td>
      <td>18.7</td>
      <td>10.6</td>
      <td>15.4</td>
      <td>14</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Ylläolevista nähdään, että <strong>aurinko</strong>-muuttujan ensimmäinen oikea rivi on kaapattu otsikoiksi, mikä on sikäli ikävää että 1) nyt otsikot ovat hämääviä ja 2) meiltä jää yhden rivin verran dataa käsittelemättä jos haluamme vaikkapa kuvaajan taulukon jostain sarakkeesta. Ratkaistaan asia laittamalla dataa ladattaessa otsikointiargumentiksi <strong>header = -1</strong>, eli rivi jota ei ole olemassa, jolloin kone tuottaa siihen järjestyslukurivin.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aurinko</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;http://sidc.oma.be/silso/INFO/sndhemcsv.php&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aurinko</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
      <th>13</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1992</td>
      <td>1</td>
      <td>1</td>
      <td>1992.001</td>
      <td>186</td>
      <td>0</td>
      <td>186</td>
      <td>14.3</td>
      <td>1.0</td>
      <td>14.3</td>
      <td>19</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1992</td>
      <td>1</td>
      <td>2</td>
      <td>1992.004</td>
      <td>190</td>
      <td>18</td>
      <td>172</td>
      <td>8.2</td>
      <td>2.6</td>
      <td>7.8</td>
      <td>21</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1992</td>
      <td>1</td>
      <td>3</td>
      <td>1992.007</td>
      <td>234</td>
      <td>26</td>
      <td>208</td>
      <td>18.3</td>
      <td>6.1</td>
      <td>17.2</td>
      <td>21</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1992</td>
      <td>1</td>
      <td>4</td>
      <td>1992.010</td>
      <td>243</td>
      <td>54</td>
      <td>189</td>
      <td>14.8</td>
      <td>7.0</td>
      <td>13.0</td>
      <td>20</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1992</td>
      <td>1</td>
      <td>5</td>
      <td>1992.012</td>
      <td>242</td>
      <td>58</td>
      <td>184</td>
      <td>13.8</td>
      <td>6.8</td>
      <td>12.0</td>
      <td>18</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Jos haluamme muuttaa otsikoinnin selkeämmäksi, voimme tietysti myös nimetä sarakkeet <strong>names = [‘nimi’,’nimi2’,’nimi3’]</strong>-argumentilla.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aurinko</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;http://sidc.oma.be/silso/INFO/sndhemcsv.php&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Vuosi&#39;</span><span class="p">,</span><span class="s1">&#39;Kuukausi&#39;</span><span class="p">,</span><span class="s1">&#39;Päivä&#39;</span><span class="p">,</span><span class="s1">&#39;Fraktio&#39;</span><span class="p">,</span><span class="s1">&#39;$P_</span><span class="si">{tot}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;$P_</span><span class="si">{poh}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;$P_</span><span class="si">{et}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;$\sigma_</span><span class="si">{tot}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;$\sigma_</span><span class="si">{poh}</span><span class="s1">$&#39;</span><span class="p">,</span>
         <span class="s1">&#39;$\sigma_</span><span class="si">{et}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;$N_</span><span class="si">{tot}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;$N_</span><span class="si">{poh}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;$N_</span><span class="si">{et}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="s1">&#39;Prov&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aurinko</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Vuosi</th>
      <th>Kuukausi</th>
      <th>Päivä</th>
      <th>Fraktio</th>
      <th>$P_{tot}$</th>
      <th>$P_{poh}$</th>
      <th>$P_{et}$</th>
      <th>$\sigma_{tot}$</th>
      <th>$\sigma_{poh}$</th>
      <th>$\sigma_{et}$</th>
      <th>$N_{tot}$</th>
      <th>$N_{poh}$</th>
      <th>$N_{et}$</th>
      <th>Prov</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1992</td>
      <td>1</td>
      <td>1</td>
      <td>1992.001</td>
      <td>186</td>
      <td>0</td>
      <td>186</td>
      <td>14.3</td>
      <td>1.0</td>
      <td>14.3</td>
      <td>19</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1992</td>
      <td>1</td>
      <td>2</td>
      <td>1992.004</td>
      <td>190</td>
      <td>18</td>
      <td>172</td>
      <td>8.2</td>
      <td>2.6</td>
      <td>7.8</td>
      <td>21</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1992</td>
      <td>1</td>
      <td>3</td>
      <td>1992.007</td>
      <td>234</td>
      <td>26</td>
      <td>208</td>
      <td>18.3</td>
      <td>6.1</td>
      <td>17.2</td>
      <td>21</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1992</td>
      <td>1</td>
      <td>4</td>
      <td>1992.010</td>
      <td>243</td>
      <td>54</td>
      <td>189</td>
      <td>14.8</td>
      <td>7.0</td>
      <td>13.0</td>
      <td>20</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1992</td>
      <td>1</td>
      <td>5</td>
      <td>1992.012</td>
      <td>242</td>
      <td>58</td>
      <td>184</td>
      <td>13.8</td>
      <td>6.8</td>
      <td>12.0</td>
      <td>18</td>
      <td>-1</td>
      <td>-1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>nimi.heads()</strong>-komennon ohella pari muuta pikkukomentoa ovat hyödyllisiä tarkasteltaessa datan muotoa. <strong>len(nimi)</strong> kertoo rivien määrän eli muuttujan pituuden (length), <strong>nimi.shape</strong> sekä rivien että sarakkeiden määrän.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Normaalisti koodisolun tuloste näyttää vain viimeisimmän annetun toiminnon. Print()-komennolla saadaan</span>
<span class="c1"># useampia arvoja näkyviin. Voit kokeilla mitä käy jos poistat printin näiden edestä.</span>

<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">aurinko</span><span class="p">))</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">aurinko</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>11109
(11109, 14)
</pre></div>
</div>
</div>
</div>
<p>Kun data on nyt saatu tyydyttävässä muodossa koneelle, sitä voidaan ryhtyä muokkaamaan halutun näköiseksi. Usein ollaan kiinnostuneita jostain yksittäisestä muuttujasta datan sisässä, jolloin pitää pystyä eristämään tiettyjä sarakkeita alkuperäisistä tiedoista tai valita vain ne rivit, joilla jonkin muuttujan arvo on tietyissä rajoissa.</p>
<p>Sarakkeen voi valita kirjoittamalla <strong>nimi.sarake</strong> tai <strong>nimi[‘sarake’]</strong>. Hakasulkumuoto on tarpeen, jos sarakkeen nimi esimerkiksi alkaa numerolla, jonka kone saattaa tulkata järjestysluvuksi. Jos haluaa helpottaa elämäänsä eikä välitä muista sarakkeista, kannattaa tämä eristys tehdä uuteen muuttujaan, eli kirjoittaa <strong>uusiNimi = nimi.sarake</strong> ja käsitellä sitä. Tässä on sekin etu, että dataa on tällöin vähemmän kerrallaan käsittelyssä eikä tietokone mahdollisten kirjoitusvirheiden tapauksessa ala esimerkiksi piirtämään histogrammeja kymmenissä ulottuvuuksissa koko alkuperäisestä datasta ja tukehdu yrittäessään.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Erotellaan uuteen muuttujaan myonidatan invarianttien massojen sarake, joka on otsikoitu nimellä M.</span>

<span class="n">iMassat</span> <span class="o">=</span> <span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">iMassat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    17.4922
1    11.5534
2     9.1636
3    12.4774
4    14.3159
Name: M, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Rivien valinta tapahtuu luomalla vastaavasti uusi muuttuja, jonka alkioiksi valitaan ne alkuperäisen datan alkiot, jotka täyttävät annetut ehdot. Tällöin esimerkiksi jonkin arvovälin valinta olisi</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">uusiNimi</span> <span class="o">=</span> <span class="n">nimi</span><span class="p">[(</span><span class="n">nimi</span><span class="o">.</span><span class="n">arvosarake</span> <span class="o">&gt;=</span> <span class="n">alaraja</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">nimi</span><span class="o">.</span><span class="n">arvosarake</span> <span class="o">&lt;=</span> <span class="n">ylaraja</span><span class="p">)]</span>
</pre></div>
</div>
<p>Sinänsä jakoehto voi olla mikä tahansa muukin looginen elementti, kuten tasan tietty luku tai tekstinpätkä ei-numeerisessa datassa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Otetaan esimerkkinä hiukkasdatasta ne rivit, joissa molempien hiukkasten energia on 30 GeViä tai yli.</span>

<span class="n">yli30</span> <span class="o">=</span> <span class="n">kaksoismyonit</span><span class="p">[(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">E1</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">E2</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">yli30</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Run</th>
      <th>Event</th>
      <th>type1</th>
      <th>E1</th>
      <th>px1</th>
      <th>py1</th>
      <th>pz1</th>
      <th>pt1</th>
      <th>eta1</th>
      <th>phi1</th>
      <th>...</th>
      <th>type2</th>
      <th>E2</th>
      <th>px2</th>
      <th>py2</th>
      <th>pz2</th>
      <th>pt2</th>
      <th>eta2</th>
      <th>phi2</th>
      <th>Q2</th>
      <th>M</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>21</th>
      <td>165617</td>
      <td>74969122</td>
      <td>G</td>
      <td>59.9226</td>
      <td>-46.1516</td>
      <td>29.4115</td>
      <td>-24.4070</td>
      <td>54.7266</td>
      <td>-0.4324</td>
      <td>2.5742</td>
      <td>...</td>
      <td>G</td>
      <td>52.4465</td>
      <td>30.1097</td>
      <td>-16.3989</td>
      <td>-39.6876</td>
      <td>34.2859</td>
      <td>-0.9885</td>
      <td>-0.4987</td>
      <td>-1</td>
      <td>89.9557</td>
    </tr>
    <tr>
      <th>36</th>
      <td>165617</td>
      <td>75138253</td>
      <td>G</td>
      <td>97.1011</td>
      <td>-23.6144</td>
      <td>6.6660</td>
      <td>-93.9497</td>
      <td>24.5372</td>
      <td>-2.0524</td>
      <td>2.8665</td>
      <td>...</td>
      <td>G</td>
      <td>30.5992</td>
      <td>-11.6134</td>
      <td>-25.9848</td>
      <td>11.2347</td>
      <td>28.4619</td>
      <td>0.3851</td>
      <td>-1.9911</td>
      <td>1</td>
      <td>88.6081</td>
    </tr>
    <tr>
      <th>46</th>
      <td>165617</td>
      <td>75887636</td>
      <td>G</td>
      <td>152.9720</td>
      <td>7.4657</td>
      <td>-30.7098</td>
      <td>-149.6710</td>
      <td>31.6042</td>
      <td>-2.2593</td>
      <td>-1.3323</td>
      <td>...</td>
      <td>G</td>
      <td>33.5835</td>
      <td>-9.2878</td>
      <td>28.7457</td>
      <td>-14.6719</td>
      <td>30.2089</td>
      <td>-0.4684</td>
      <td>1.8833</td>
      <td>1</td>
      <td>88.2438</td>
    </tr>
    <tr>
      <th>78</th>
      <td>165617</td>
      <td>75833588</td>
      <td>G</td>
      <td>181.8770</td>
      <td>44.1427</td>
      <td>-14.9498</td>
      <td>175.8040</td>
      <td>46.6055</td>
      <td>2.0379</td>
      <td>-0.3265</td>
      <td>...</td>
      <td>G</td>
      <td>170.0210</td>
      <td>-34.6301</td>
      <td>12.3248</td>
      <td>166.0000</td>
      <td>36.7579</td>
      <td>2.2128</td>
      <td>2.7997</td>
      <td>-1</td>
      <td>83.0943</td>
    </tr>
    <tr>
      <th>110</th>
      <td>165617</td>
      <td>75779415</td>
      <td>G</td>
      <td>50.2440</td>
      <td>37.8072</td>
      <td>-12.2044</td>
      <td>-30.7590</td>
      <td>39.7283</td>
      <td>-0.7124</td>
      <td>-0.3122</td>
      <td>...</td>
      <td>G</td>
      <td>49.2396</td>
      <td>-47.6064</td>
      <td>8.2338</td>
      <td>-9.5061</td>
      <td>48.3132</td>
      <td>-0.1955</td>
      <td>2.9703</td>
      <td>-1</td>
      <td>90.3544</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 21 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">yli30</span><span class="p">))</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kaksoismyonit</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6516
100000
</pre></div>
</div>
</div>
</div>
<p>Jos halutaan useampi kokonainen sarake erittelemättä rivejä, voi kirjoittaa</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">uusiMuuttuja</span> <span class="o">=</span> <span class="n">vanhaMuuttuja</span><span class="p">[[</span><span class="s1">&#39;sarake1&#39;</span><span class="p">,</span> <span class="s1">&#39;sarake2&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span>
</pre></div>
</div>
<p>Jos halutaan hakea tekstiä, voidaan kirjoittaa vaikkapa seuraavasti <strong>nimi.loc[ ]</strong>-funktion avulla.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">uusiMuuttuja</span> <span class="o">=</span> <span class="n">vanhaMuuttuja</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">vanhaMuuttuja</span><span class="p">[</span><span class="s1">&#39;sarake&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;haluttu_asia&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Tällöin toki on tiedettävä tarkkaan mitä etsii. Jos haluaa kysyä datalta sokeammin kysymyksiä, <strong>contains</strong>-toiminto auttaa.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">uusiNimi</span> <span class="o">=</span> <span class="n">vanhaNimi</span><span class="p">[</span><span class="n">vanhaNimi</span><span class="p">[</span><span class="s1">&#39;sarake&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;haettu_pätkä&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>tekee uuden muuttujan, jossa on nyt haetun pätkän sisältäneet rivit. Oletusarvoisesti toiminto välittää kirjainkoosta, mutta sen voi laittaa pois päältä kirjoittamalla</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">uusiNimi</span> <span class="o">=</span> <span class="n">vanhaNimi</span><span class="p">[</span><span class="n">vanhaNimi</span><span class="p">[</span><span class="s1">&#39;sarake&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;haettu_pätkä&#39;</span><span class="p">,</span> <span class="n">case</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)]</span>
</pre></div>
</div>
<p>Kannattaa huomata, että <strong>str.contains()</strong> itsessään on looginen operaatio, joten koodi palauttaa tiedon kyllä / ei kysytystä asiasta. Myös negaatio toimii, kuten alla suomalaisten alkoholivalmistajien listan selaaminen poistamalla kaikki Oy tai Oyj yritykset. Samalla toki voi mennä joku Oy-alkuinen firma, joten kannattaa olla tarkkana.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">juomat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;http://avoindata.valvira.fi/alkoholi/alkoholilupa_valmistus.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">,</span> <span class="n">na_filter</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">juomat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Y-Tunnus</th>
      <th>Nimi</th>
      <th>Luvan alkupvm</th>
      <th>Olut</th>
      <th>Viini</th>
      <th>Hedelmäviini</th>
      <th>Tislatut alkoholijuomat</th>
      <th>Väkiviina</th>
      <th>Käsityöläisoluen vähittäismyyntilupa</th>
      <th>Tilaviinin vähittäismyyntilupa</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0107011-5</td>
      <td>Berner Oy</td>
      <td>03.02.2014</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>X</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>0170318-9</td>
      <td>Olvi Oyj</td>
      <td>17.02.1995</td>
      <td>X</td>
      <td></td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>0171079-2</td>
      <td>Alahovin Viinitila Oy</td>
      <td>25.02.1995</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td>X</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0171110-3</td>
      <td>Oy Gust. Ranin Lignell &amp; Piispanen</td>
      <td>20.01.1995</td>
      <td></td>
      <td></td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>0193088-3</td>
      <td>Kakslauttanen Arctic Resort Oy</td>
      <td>25.02.2020</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tiettyValmistaja</span> <span class="o">=</span> <span class="n">juomat</span><span class="p">[</span><span class="n">juomat</span><span class="p">[</span><span class="s1">&#39;Nimi&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Oy&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">juomat</span><span class="p">))</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tiettyValmistaja</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>203
35
</pre></div>
</div>
</div>
</div>
<p>Jos haluat lisätä tai poistaa sarakkeita datasta, siihen sopivat toiminnot <strong>nimi = nimi.assign(sarake = tiedot)</strong> ja <strong>nimi.drop([‘sarake1’,’sarake2’…], axis = 1)</strong>. Dropissa <strong>axis</strong> on sikäli tärkeä parametri, että komento ymmärtää poimia nimenomaan sarakkeen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sarakkeen poistaminen dropilla.</span>
<span class="c1"># Joskus .drop ei toimi suoraan, joten tallennetaan sen tulos aiemman muuttujan tilalle sekaannuksen välttämiseksi.</span>

<span class="n">juomat</span> <span class="o">=</span> <span class="n">juomat</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Nimi&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">juomat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Y-Tunnus</th>
      <th>Luvan alkupvm</th>
      <th>Olut</th>
      <th>Viini</th>
      <th>Hedelmäviini</th>
      <th>Tislatut alkoholijuomat</th>
      <th>Väkiviina</th>
      <th>Käsityöläisoluen vähittäismyyntilupa</th>
      <th>Tilaviinin vähittäismyyntilupa</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0107011-5</td>
      <td>03.02.2014</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>X</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>0170318-9</td>
      <td>17.02.1995</td>
      <td>X</td>
      <td></td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>0171079-2</td>
      <td>25.02.1995</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td>X</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0171110-3</td>
      <td>20.01.1995</td>
      <td></td>
      <td></td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>0193088-3</td>
      <td>25.02.2020</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sarakkeen lisääminen assignilla.</span>
<span class="c1"># Laitetaan tässä äskeiseen mukaan sarake R, jossa on numeroita.</span>
<span class="c1"># Huolehdi, että sarake on oikean mittainen. Sisältö itsessään voi olla mitä vain, lukuja, tekstiä jne.</span>

<span class="n">luvut</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">juomat</span><span class="p">))</span>
 
<span class="n">juomat</span> <span class="o">=</span> <span class="n">juomat</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">R</span> <span class="o">=</span> <span class="n">luvut</span><span class="p">)</span>
<span class="n">juomat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Y-Tunnus</th>
      <th>Luvan alkupvm</th>
      <th>Olut</th>
      <th>Viini</th>
      <th>Hedelmäviini</th>
      <th>Tislatut alkoholijuomat</th>
      <th>Väkiviina</th>
      <th>Käsityöläisoluen vähittäismyyntilupa</th>
      <th>Tilaviinin vähittäismyyntilupa</th>
      <th>R</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0107011-5</td>
      <td>03.02.2014</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>X</td>
      <td></td>
      <td></td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0170318-9</td>
      <td>17.02.1995</td>
      <td>X</td>
      <td></td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
      <td>0.495050</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0171079-2</td>
      <td>25.02.1995</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td>X</td>
      <td>0.990099</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0171110-3</td>
      <td>20.01.1995</td>
      <td></td>
      <td></td>
      <td>X</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
      <td>1.485149</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0193088-3</td>
      <td>25.02.2020</td>
      <td>X</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>1.980198</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="peruslaskutoimitukset-ja-syntaksilogiikka">
<h2>4. Peruslaskutoimitukset ja syntaksilogiikka<a class="headerlink" href="#peruslaskutoimitukset-ja-syntaksilogiikka" title="Permalink to this headline">#</a></h2>
<p><strong>Kooste:</strong></p>
<p>Itseisarvot <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  
</pre></div>
</div>
<p>Neliöjuuret <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  
</pre></div>
</div>
<p>Yhteenlasku <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> 
</pre></div>
</div>
<p>Vähennyslasku <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span>  
</pre></div>
</div>
<p>Jakolasku <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">/</span><span class="n">y</span>  
</pre></div>
</div>
<p>Kertolasku <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">*</span><span class="n">y</span>  
</pre></div>
</div>
<p>Potenssit <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">**</span><span class="n">y</span>  
</pre></div>
</div>
<p>Suurin arvo <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  
</pre></div>
</div>
<p>Pienin arvo <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  
</pre></div>
</div>
<p>Oman funktion luominen <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">nimi</span><span class="p">(</span><span class="n">syöte</span><span class="p">):</span>
    <span class="n">toimitukset</span>
    
</pre></div>
</div>
<p>Peruslaskutoimituksissa ei ole mitään erityisen ihmeellistä, ne kirjoitetaan siinä missä mihin tahansa muuhunkin tietokonelaskimeen. Jos haluaa ohjelman tulostavan useamman asian kerrallaan, kannattaa käyttää <strong>print()</strong>-komentoa jolloin muutakin kuin viimeisin vaihe tulee näkyviin. Tekstiä ja numeroita voi myös yhdistää, jolloin <strong>repr(lukuja)</strong> voi helpottaa. Tämä näppärä funktio palauttaa annetusta muuttujasta printattavan version. <a class="reference external" href="https://docs.python.org/3/library/functions.html">Tästä</a> näppärästä listasta näkee mitä kaikkia sisäänrakennettuja funktioita Pythonissa on ilman pakettejakin, mm. pienimmän ja suurimman luvun etsimistä tiedostosta, lukujen pyöristämistä ja vastaavaa. Jos joku jäi ihmetyttämään, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html">tässä</a> vielä lisää samasta asiasta.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Voit muokata &#39;luku&#39;-muuttujan sisältöä eri laskuiksi.</span>

<span class="n">luku</span> <span class="o">=</span> <span class="mi">14</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">5</span><span class="o">/</span><span class="mi">2</span>
<span class="n">teksti</span> <span class="o">=</span> <span class="s1">&#39;Päivän tulos on: &#39;</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">teksti</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">luku</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Päivän tulos on: 30.5
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Max() hakee joukon suurimman alkion.</span>

<span class="n">kasaLukuja</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">67</span><span class="p">,</span><span class="mi">578</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="o">-</span><span class="mi">34</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Suurin luku on &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">kasaLukuja</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Suurin luku on 578
</pre></div>
</div>
</div>
</div>
<p>Kiinnostavampaa on, että Pythonissa voi luoda myös omia funktioitaan tiettyihin tarpeisiin. Tällöin <strong>määritellään</strong> funktion nimi ja vaikutus sisään laitettuun tietoon kirjoittamalla</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">funktionNimi</span><span class="p">(</span><span class="n">syöte</span><span class="p">):</span>  
    <span class="n">kuvaus</span> <span class="n">sisennettynä</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Luodaan funktio, joka puolittaa sille syötetyn numeron.</span>

<span class="k">def</span> <span class="nf">puolitus</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    
<span class="n">puolitus</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tehdään summauskone, joka kysyy käyttäjältä kokonaislukuja (toimii MyBinderissa). </span>

<span class="k">def</span> <span class="nf">summaus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">summa</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="n">lause</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> + </span><span class="si">{}</span><span class="s1"> on yhteensä </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">summa</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">lause</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">vapaaValinta</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Anna kokonaisluku: &quot;</span><span class="p">))</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Anna toinenkin kokonaisluku: &quot;</span><span class="p">))</span>
    <span class="n">summaus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="n">vapaaValinta</span><span class="p">()</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="nn">Input In [24],</span> in <span class="ni">&lt;cell line: 13&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>     <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Anna toinenkin kokonaisluku: &quot;</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>     <span class="n">summaus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">13</span> <span class="n">vapaaValinta</span><span class="p">()</span>

<span class="nn">Input In [24],</span> in <span class="ni">vapaaValinta</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="k">def</span> <span class="nf">vapaaValinta</span><span class="p">():</span>
<span class="ne">----&gt; </span><span class="mi">9</span>     <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Anna kokonaisluku: &quot;</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>     <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Anna toinenkin kokonaisluku: &quot;</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>     <span class="n">summaus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/ipykernel/kernelbase.py:1174,</span> in <span class="ni">Kernel.raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1167</span> <span class="sd">&quot;&quot;&quot;Forward raw_input to frontends</span>
<span class="g g-Whitespace">   </span><span class="mi">1168</span><span class="sd"> </span>
<span class="g g-Whitespace">   </span><span class="mi">1169</span><span class="sd"> Raises</span>
<span class="g g-Whitespace">   </span><span class="mi">1170</span><span class="sd"> ------</span>
<span class="g g-Whitespace">   </span><span class="mi">1171</span><span class="sd"> StdinNotImplementedError if active frontend doesn&#39;t support stdin.</span>
<span class="g g-Whitespace">   </span><span class="mi">1172</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1173</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allow_stdin</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1174</span>     <span class="k">raise</span> <span class="n">StdinNotImplementedError</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1175</span>         <span class="s2">&quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1176</span>     <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1177</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_request</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1178</span>     <span class="nb">str</span><span class="p">(</span><span class="n">prompt</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1179</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_parent_ident</span><span class="p">[</span><span class="s2">&quot;shell&quot;</span><span class="p">],</span>
<span class="g g-Whitespace">   </span><span class="mi">1180</span>     <span class="bp">self</span><span class="o">.</span><span class="n">get_parent</span><span class="p">(</span><span class="s2">&quot;shell&quot;</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1181</span>     <span class="n">password</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1182</span> <span class="p">)</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Luodaan funktio, joka palauttaa annetun radiaanilistan tulokset astelistana. While-silmukka käy läpi ensimmäisestä</span>
<span class="c1"># alkiosta haluttuun kohtaan asti listaa ja tekee alkioille jonkun toimituksen.</span>

<span class="k">def</span> <span class="nf">kulmaus</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mi">360</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">;</span>

<span class="n">radeja</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">kulmaus</span><span class="p">(</span><span class="n">radeja</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">radeja</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[286.4788975654116, 114.59155902616465, 229.1831180523293, 114.59155902616465, 57.29577951308232, 171.88733853924697]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tai sama nätimmin for-silmukkana ihan samalla periaatteella:</span>

<span class="k">def</span> <span class="nf">kulmain</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mi">360</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    
<span class="n">rad</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">kulmain</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[57.29577951308232, 114.59155902616465, 171.88733853924697, 286.4788975654116, 343.77467707849394]
</pre></div>
</div>
</div>
</div>
</section>
<section id="satunnaisdatan-luominen">
<h2>5. Satunnaisdatan luominen<a class="headerlink" href="#satunnaisdatan-luominen" title="Permalink to this headline">#</a></h2>
<p><strong>Kooste:</strong></p>
<p>Satunnainen kokonaisluku <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rand</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">alin</span><span class="p">,</span><span class="n">ylin</span><span class="p">)</span>
</pre></div>
</div>
<p>Satunnainen luku 0 ja 1 välillä <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rand</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>  
</pre></div>
</div>
<p>Mielivaltainen joukko mahdollisista <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rand</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">joukko</span><span class="p">,</span> <span class="n">painotukset</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">määrä</span><span class="p">)</span>  
</pre></div>
</div>
<p>Mielivaltainen joukko populaatiosta <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rand</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">joukko</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">määrä</span><span class="p">)</span>  
</pre></div>
</div>
<p>Normaalijakauma <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rand</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="n">odotusarvo</span><span class="p">,</span> <span class="n">keskihajonta</span><span class="p">)</span>  
</pre></div>
</div>
<p>Tasainen lukujono <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">alku</span><span class="p">,</span> <span class="n">loppu</span><span class="p">,</span> <span class="n">num</span> <span class="o">=</span> <span class="n">jakojen</span> <span class="n">lukumäärä</span><span class="p">)</span>  
</pre></div>
</div>
<p>Tasainen lukujono <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">alku</span><span class="p">,</span> <span class="n">loppu</span><span class="p">,</span> <span class="n">askelkoko</span><span class="p">)</span>
</pre></div>
</div>
<p>Joskus on kiinnostavaa luoda oikean datan kaveriksi simuloituja tai satunnaisia mittauksia. Siinä missä vaikkapa monimutkaisempien <a class="reference external" href="https://fi.wikipedia.org/wiki/Monte_Carlo_-simulaatio">Monte Carlo -simulaatioiden</a> tuottaminen meneekin tämän ohjeen tavoitteiden ulkopuolelle, voidaan silti vilkaista hieman erilaisia tapoja tuottaa satunnaisia numeroita. Tietokoneen tapauksessa on kuitenkin muistettava, että tavalliset satunnaisgeneraatiometodit ovat siinä mielessä pseudosatunnaisia deterministisiä prosesseja, ettei niitä kannata käyttää vaikkapa pankkisalaisuuksien tai turvalukujen kehittämiseen. Sitä varten on olemassa raskaampia ja monimutkaisempia keinoja.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Luodaan satunnainen kokonaisluku halutulta väliltä.</span>

<span class="n">lottoarpa</span> <span class="o">=</span> <span class="n">rand</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">teksti</span> <span class="o">=</span> <span class="s1">&#39;Päivän voittoarpa on: &#39;</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">teksti</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">lottoarpa</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Päivän voittoarpa on: 76
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Luodaan satunnainen liukuluku 0 ja 1 väliltä kerrottuna viidellä.</span>

<span class="n">luku</span> <span class="o">=</span> <span class="n">rand</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="mi">5</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">luku</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.9580548996903206
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Poimitaan satunnaisia jäseniä listalta, mutta tehdään tietyistä valinnoista todennäköisempiä.</span>

<span class="n">nimiLapsille</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Pekka&#39;</span><span class="p">,</span><span class="s1">&#39;Jukka&#39;</span><span class="p">,</span><span class="s1">&#39;Iida&#39;</span><span class="p">,</span><span class="s1">&#39;Netta&#39;</span><span class="p">,</span><span class="s1">&#39;Paula&#39;</span><span class="p">,</span><span class="s1">&#39;Torsti&#39;</span><span class="p">]</span>
<span class="n">todariPainot</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="c1"># Määritetään montako nimeä halutaan, k = haluttu. Choices-komento voi ottaa saman tulokset useita kertoja.</span>

<span class="n">nimet</span> <span class="o">=</span> <span class="n">rand</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">nimiLapsille</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">todariPainot</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nimet</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Jukka&#39;, &#39;Jukka&#39;, &#39;Jukka&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Samanlainen valinta ilman toistoa.</span>

<span class="n">oppilaat</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Pekka&#39;</span><span class="p">,</span><span class="s1">&#39;Jukka&#39;</span><span class="p">,</span><span class="s1">&#39;Iida&#39;</span><span class="p">,</span><span class="s1">&#39;Netta&#39;</span><span class="p">,</span><span class="s1">&#39;Paula&#39;</span><span class="p">,</span><span class="s1">&#39;Torsti&#39;</span><span class="p">]</span>
<span class="n">kolmeVapaaehtoista</span> <span class="o">=</span> <span class="n">rand</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">oppilaat</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">kolmeVapaaehtoista</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Paula&#39;, &#39;Netta&#39;, &#39;Jukka&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Satunnaisluku annetusta normaalijakaumasta (odotusarvo, keskihajonta).</span>

<span class="n">luku</span> <span class="o">=</span> <span class="n">rand</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">luku</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.7954372168273416
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Luodaan tasaisesti jaettu lukusuora 1 ja 10 väliltä ja satunnaistetaan sitä hieman.</span>

<span class="n">lukusuora</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">satunnaistin</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)):</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">rand</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">;</span>

<span class="n">tulos</span> <span class="o">=</span> <span class="n">satunnaistin</span><span class="p">(</span><span class="n">lukusuora</span><span class="p">)</span>
<span class="c1"># print(lukusuora)</span>
<span class="c1"># print(tulos)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tulos</span><span class="p">,</span><span class="s1">&#39;g*&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_59_0.png" src="../_images/Ohjeita Pythonin käyttöön_59_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Toinen tapa tuottaa tasaisesti jaettu lukujoukko [a,b[ komennolla arange(a,b,c) missä c on askeleen koko.</span>
<span class="c1"># Toiminto voi joskus häröillä jos c ei ole kokonaisluku. Huomaa, että b ei kuulu joukkoon.</span>

<span class="n">luvut</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">luvut</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1 2 3 4 5 6 7 8 9]
</pre></div>
</div>
</div>
</div>
</section>
<section id="kuvaajien-piirtaminen">
<h2>6. Kuvaajien piirtäminen<a class="headerlink" href="#kuvaajien-piirtaminen" title="Permalink to this headline">#</a></h2>
<p><strong>Kooste:</strong></p>
<p>Peruskuvaaja <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">nimi</span><span class="p">,</span> <span class="s1">&#39;tyyli ja väri&#39;</span><span class="p">,</span> <span class="n">muotoiluja</span><span class="p">)</span>
</pre></div>
</div>
<p>Hajotuskuva eli scatterplot <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">data</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="n">data</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;merkkityyli&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;väri&#39;</span><span class="p">,</span> <span class="n">muotoiluja</span><span class="p">)</span>
</pre></div>
</div>
<p>Histogrammi <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">nimi</span><span class="p">,</span> <span class="n">jakojenMäärä</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="p">(</span><span class="n">alku</span><span class="p">,</span> <span class="n">loppu</span><span class="p">),</span> <span class="n">muotoiluja</span><span class="p">)</span>
</pre></div>
</div>
<p>Selite näkyviin (vaatii muotoiluparametrit label = ‘nimike’) <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">muotoiluja</span><span class="p">)</span>
</pre></div>
</div>
<p>Kuvaajat nätisti näkyviin samaan kuvaan <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Normaalijakauman sovitus dataan <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">nimi</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Kuvaajan muotoiluja ja nimeämistä <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;vaakanimi&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;otsikko&#39;</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">vaakaluku</span><span class="p">,</span> <span class="n">pystyluku</span><span class="p">))</span>

</pre></div>
</div>
<p>Virheiden piirtämisestä <span class="math notranslate nohighlight">\(\rightarrow\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">arvo2</span><span class="p">,</span> <span class="n">xerr</span> <span class="o">=</span> <span class="n">virhe1</span><span class="p">,</span> <span class="n">yerr</span> <span class="o">=</span> <span class="n">virhe2</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Kuvaajat ovat kenties tärkein syy käyttää ohjelmointia tiedeopetuksessa. Isoistakin aineistoista on nopeaa ja vaivatonta tuottaa selkeyttäviä visualisaatioita. Kuhunkin tapaukseen sopii omanlaisensa metodi, joista yleisimpiä tarkastellaan tässä.</p>
<p>Kuvaajien värejä ja merkkejä voi vaihtaa vapaasti. <a class="reference external" href="https://matplotlib.org/api/markers_api.html?highlight=markers#module-matplotlib.markers">Täällä</a> on lista ymmärretyistä grafiikoista.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Peruskuva plot-funktiolla. Jos parametreina toimii vain yksi tietorivi, x-akseli otetaan järjestysnumeroista.</span>

<span class="n">lukuja</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lukuja</span><span class="p">,</span> <span class="s1">&#39;b*&#39;</span><span class="p">)</span>

<span class="c1"># plt.show() on hyvä laittaa piirtojen loppuun. Kuvaajan saa näkyviin ilmankin, mutta joskus näkyviin tulisi pelkkä</span>
<span class="c1"># tiedostopaikka tai laskennallista sotkua. Tämä selkeyttää asioita, käytä sitä.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_64_0.png" src="../_images/Ohjeita Pythonin käyttöön_64_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Kuvaajille on kuitenkin hyvä antaa nimiä, jotta niiden lukijallekin on selvää mitä tapahtuu. </span>
<span class="c1"># Tässä näet miten eri osia voi nimetä.</span>

<span class="c1"># Kaksi satunnaista datasettiä.</span>

<span class="n">tulos1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span><span class="o">*</span><span class="n">rand</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">tulos2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span><span class="o">*</span><span class="n">rand</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Piirretään molemmat.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tulos1</span><span class="p">,</span> <span class="s1">&#39;r^&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Mittaus 1&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tulos2</span><span class="p">,</span> <span class="s1">&#39;b*&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Mittaus 2&#39;</span><span class="p">)</span>

<span class="c1"># Nimetään akselit ja otsikot. Fontsize-parametrilla saa tekstit haluttuun kokoon.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Aika (s)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Nopeus (m/s)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Liikkeen mittauksia </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span> <span class="c1"># \n luo uuden rivin otsikon muotoilua varten</span>

<span class="c1"># Lisätään selite. Jos loc-parametria ei määritellä, selite laitetaan automaattisesti johonkin mihin se mahtuu.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>

<span class="c1"># Näytetään kuvaaja.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_65_0.png" src="../_images/Ohjeita Pythonin käyttöön_65_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Myös trigonometrisia funktioita voidaan piirtää nätisti.</span>

<span class="c1"># Tehdään x-akseliksi tasainen lukusuora.</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># Määritetään piirrettävät funktiot-</span>

<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Piirretään kuvaajat.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;sin(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;cos(x)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_66_0.png" src="../_images/Ohjeita Pythonin käyttöön_66_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Kuvaajien oletuskoko Jupyterissa on jokseenkin pieni. figsize-komento auttaa skaalaamaan kuvia haluttuihin mittoihin.</span>
<span class="c1"># Toistetaan äskeinen kuvaaja.</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Tässä määrätään koko. Voit testata miten lukujen muokkaus vaikuttaa.</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;sin(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;cos(x)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_67_0.png" src="../_images/Ohjeita Pythonin käyttöön_67_0.png" />
</div>
</div>
<p>Toinen perinteinen kuvaaja on arvopareja piirtävä <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.scatter.html">scatterplot</a>, jossa molemmat akselit ovat muuttujia. Hyvin yleinen esimerkiksi fysiikan tutkimuksessa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">satunnaistin</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)):</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">rand</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">;</span>

<span class="c1"># Otetaan satunnaista dataa, jossa toinen arvo jakautuu välillä 0-5 ja toinen 0-20.</span>

<span class="n">arvo1</span> <span class="o">=</span> <span class="n">satunnaistin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="n">arvo2</span> <span class="o">=</span> <span class="n">satunnaistin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">arvo2</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_69_0.png" src="../_images/Ohjeita Pythonin käyttöön_69_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Toinen scatter-esimerkki, jossa molemmat arvot</span>
<span class="c1"># hajoavat normaalijakauman mukaan odotetusta lineaarisesta riippuvuudesta.</span>


<span class="k">def</span> <span class="nf">satunnaistaja</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)):</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">rand</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">;</span>

<span class="n">arvo1</span> <span class="o">=</span> <span class="n">satunnaistaja</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="n">arvo2</span> <span class="o">=</span> <span class="n">satunnaistaja</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">arvo2</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Mittaukset&#39;</span><span class="p">)</span>

<span class="c1"># Lasketaan huvikseen mukaan myös suoran sovite pienimmällä neliösummalla.</span>

<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">arvo2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">intercept</span> <span class="o">+</span> <span class="n">slope</span><span class="o">*</span><span class="n">arvo1</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sovitus&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Jos haluaisi tietää suoran matemaattisia arvoja, voisi kirjoittaa esim. print (slope) jne.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_70_0.png" src="../_images/Ohjeita Pythonin käyttöön_70_0.png" />
</div>
</div>
<p>Yksi merkittävä kuvaajatyyppi on histogrammi, jolla voidaan kuvata eri tulosten suhteellista esiintyvyyttä datassa. Histogrammeja näkee hyvin monissa paikoissa, niin hiukkasfysiikassa, lääketieteessä kuin yhteiskunnallisissakin tiedoissa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Otetaan satunnainen ikäjakauma ja luodaan sitä kuvaava histogrammi.</span>

<span class="k">def</span> <span class="nf">ikageneraattori</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)):</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">rand</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">;</span>

<span class="n">iat</span> <span class="o">=</span> <span class="n">ikageneraattori</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">iat</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">110</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Ikävuodet&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Määrä&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Ikäjakauma </span><span class="si">%i</span><span class="s1"> ihmisen otoksessa </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">iat</span><span class="p">)),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span> <span class="p">)</span> 

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_72_0.png" src="../_images/Ohjeita Pythonin käyttöön_72_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Otetaan hiukkasdataa törmäyksistä, joista havaittiin tulevan myonipareja.</span>

<span class="n">kaksoismyonit</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../Data/Dimuon_DoubleMu.csv&#39;</span><span class="p">)</span>

<span class="c1"># Piirretään koko roskan histogrammi invariantin massan, sarake M, suhteen.</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">150</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Invariantti massa (GeV/$c^2$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Tapahtumien lukumäärä&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Invariantin massan jakauma myoneista laskettuna </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span> <span class="p">)</span> 

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_73_0.png" src="../_images/Ohjeita Pythonin käyttöön_73_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tarkastellaan ylläolevasta vain 80 ja 100 välillä olevaa aluetta. Tähän kävisi myös range-parametrin siirto,</span>
<span class="c1"># mutta on kevyempää rajata pienempi pala dataa käsittelyyn.</span>

<span class="n">huippu</span> <span class="o">=</span> <span class="n">kaksoismyonit</span><span class="p">[(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span> <span class="o">&gt;=</span> <span class="mi">80</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">)]</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">huippu</span><span class="o">.</span><span class="n">M</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="p">(</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Invariantti massa (GeV/$c^2$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Tapahtumien lukumäärä&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Invariantin massan jakauma myoneista laskettuna </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span> <span class="p">)</span> 

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_74_0.png" src="../_images/Ohjeita Pythonin käyttöön_74_0.png" />
</div>
</div>
<p>Keskimäärin epälineaaristen käyrien sovittaminen tuloksiin vaatii hieman enemmän koodaamista, mutta jakaumien tapauksessa Pythonista löytyy aika kattavasti valmiita komentoja. Ylläolevaan kuvaajaan saa esimerkiksi kivan normaalijakauman sovitteen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tässä määritellään sovituksen rajat. Nämä on hyvä määritellä tässä, jotta itse koodiin ei tarvitse porautua</span>
<span class="c1"># jälkeenpäin ja etsiä jokaista viittauskohtaa erikseen.</span>

<span class="n">alaraja</span> <span class="o">=</span> <span class="mi">87</span>
<span class="n">ylaraja</span> <span class="o">=</span> <span class="mi">95</span>

<span class="n">pala</span> <span class="o">=</span> <span class="n">kaksoismyonit</span><span class="p">[(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span> <span class="o">&gt;</span> <span class="n">alaraja</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span> <span class="o">&lt;</span> <span class="n">ylaraja</span><span class="p">)]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Tässä määritellään miltä väliltä alkuperäistä dataa katsellaan. Sovitteen ei tarvitse seurata sitä vaan </span>
<span class="c1"># se on suunniteltu pelkän huipun kohdalle.</span>

<span class="n">esite_ala</span> <span class="o">=</span> <span class="mi">80</span>
<span class="n">esite_yla</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">alue</span> <span class="o">=</span> <span class="n">kaksoismyonit</span><span class="p">[(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span> <span class="o">&gt;</span> <span class="n">esite_ala</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span> <span class="o">&lt;</span> <span class="n">esite_yla</span><span class="p">)]</span>

<span class="c1"># Koska näytetyn histogrammin pinta-ala asetetaan ykköseen kertymäfunktiota varten, määritellään tässä kerroin</span>
<span class="c1"># joka huomioi tarkastellun alueen ja koko alueen suhteen sovitusta tehtäessä.</span>

<span class="n">kerroin</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pala</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">alue</span><span class="p">)</span>
<span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pala</span><span class="o">.</span><span class="n">M</span><span class="p">)</span>

<span class="c1"># Tässä piirretään itse histogrammi valituissa rajoissa koko alkuperäisestä datasta..</span>

<span class="n">n</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">kaksoismyonit</span><span class="o">.</span><span class="n">M</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="n">density</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;stepfilled&#39;</span><span class="p">,</span>
                            <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="n">esite_ala</span><span class="p">,</span><span class="n">esite_yla</span><span class="p">))</span>

<span class="c1"># Tässä piirretään normaalijakauman funktio aiemman kertoimen kera.</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">kerroin</span><span class="o">*</span><span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span> <span class="n">bins</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Massa [GeV/$c^2$]&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Tapahtuman todennäköisyys&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1"># Tämä otsikko näyttää hieman karulta, mutta se huomioi nyt datasta lasketut tilastolliset arvot.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$\mathrm{Histogrammi\ invarianteista\ massoista\ normeerattuna\ ykköseen:}\ \mu=</span><span class="si">%.3f</span><span class="s1">,\ \sigma=</span><span class="si">%.3f</span><span class="s1">$&#39;</span>
          <span class="o">%</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span><span class="n">sigma</span><span class="p">),</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1"># Tähän saa myös ruudukon, huraa!</span>

<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_76_0.png" src="../_images/Ohjeita Pythonin käyttöön_76_0.png" />
</div>
</div>
<p>Kuvaajan voi piirtää myös tiedostosta, jossa ei ole numeroita. Otetaan esimerkiksi tilastoja Lontoon liikenneonnettomuuksista.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Nelisenkymmentätuhatta tapaturmaa erinäisin kulkupelein, samalla tapahtumalla on sama viitenumero AREFNO.</span>

<span class="n">liikenne</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;../Data/2016-gla-data-extract-vehicle.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">loukkaantuneet</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;../Data/2016-gla-data-extract-casualty.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">liikenne</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AREFNO</th>
      <th>Borough</th>
      <th>Boro</th>
      <th>Easting</th>
      <th>Northing</th>
      <th>Vehicle Ref.</th>
      <th>Vehicle Type</th>
      <th>Vehicle Type (Banded)</th>
      <th>Vehicle Manoeuvres</th>
      <th>Vehicle Skidding</th>
      <th>...</th>
      <th>Junction Location</th>
      <th>Object in C/W</th>
      <th>Veh. Leaving C/W</th>
      <th>Veh. off C/W</th>
      <th>Veh. Impact</th>
      <th>VJNYPURP DECODED</th>
      <th>Driver Sex</th>
      <th>Driver Age</th>
      <th>Driver Age (Banded)</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1160001090</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>531350</td>
      <td>181580</td>
      <td>1</td>
      <td>08 Taxi</td>
      <td>4 Taxi</td>
      <td>04 Slowing Or Stopping</td>
      <td>0 No Skidding/Overturn</td>
      <td>...</td>
      <td>0 Not At Jct</td>
      <td>00 None</td>
      <td>0 Did Not Leave</td>
      <td>00 None</td>
      <td>4 N/S Hit First</td>
      <td>1 Jny Part of Work</td>
      <td>1 Male</td>
      <td>46</td>
      <td>35-64</td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>1160002980</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>532780</td>
      <td>180410</td>
      <td>1</td>
      <td>01 Pedal Cycle</td>
      <td>1 Pedal cycle</td>
      <td>13 Overtake Move Veh O/S</td>
      <td>0 No Skidding/Overturn</td>
      <td>...</td>
      <td>0 Not At Jct</td>
      <td>00 None</td>
      <td>0 Did Not Leave</td>
      <td>00 None</td>
      <td>1 Front Hit First</td>
      <td>5 Other/Not Known</td>
      <td>3 Not Traced</td>
      <td>0</td>
      <td>Unknown</td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>1160002980</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>532780</td>
      <td>180410</td>
      <td>2</td>
      <td>01 Pedal Cycle</td>
      <td>1 Pedal cycle</td>
      <td>14 Overtake Stat Veh O/S</td>
      <td>0 No Skidding/Overturn</td>
      <td>...</td>
      <td>0 Not At Jct</td>
      <td>00 None</td>
      <td>0 Did Not Leave</td>
      <td>00 None</td>
      <td>2 Back Hit First</td>
      <td>5 Other/Not Known</td>
      <td>1 Male</td>
      <td>46</td>
      <td>35-64</td>
      <td></td>
    </tr>
    <tr>
      <th>3</th>
      <td>1160006347</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>531400</td>
      <td>181570</td>
      <td>1</td>
      <td>09 Car</td>
      <td>3 Car</td>
      <td>09 Turning Right</td>
      <td>0 No Skidding/Overturn</td>
      <td>...</td>
      <td>8 Jct Mid</td>
      <td>00 None</td>
      <td>0 Did Not Leave</td>
      <td>00 None</td>
      <td>1 Front Hit First</td>
      <td>5 Other/Not Known</td>
      <td>1 Male</td>
      <td>22</td>
      <td>17-24</td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>1160006347</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>531400</td>
      <td>181570</td>
      <td>2</td>
      <td>09 Car</td>
      <td>3 Car</td>
      <td>05 Moving Off</td>
      <td>0 No Skidding/Overturn</td>
      <td>...</td>
      <td>8 Jct Mid</td>
      <td>00 None</td>
      <td>0 Did Not Leave</td>
      <td>00 None</td>
      <td>3 O/S Hit First</td>
      <td>5 Other/Not Known</td>
      <td>1 Male</td>
      <td>69</td>
      <td>65+</td>
      <td></td>
    </tr>
  </tbody>
</table>
<p>5 rows × 21 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loukkaantuneet</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AREFNO</th>
      <th>Borough</th>
      <th>Boro</th>
      <th>Easting</th>
      <th>Northing</th>
      <th>CREFNO</th>
      <th>Casualty Class</th>
      <th>Casualty Sex</th>
      <th>Casualty Age (Banded)</th>
      <th>Casualty Age</th>
      <th>No. of Casualties</th>
      <th>Casualty Severity</th>
      <th>Ped. Location</th>
      <th>Ped. Movement</th>
      <th>Mode of Travel</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1160001090</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>531350</td>
      <td>181580</td>
      <td>1</td>
      <td>3 Pedestrian</td>
      <td>1 Male</td>
      <td>25-59</td>
      <td>54</td>
      <td>1</td>
      <td>3 Slight</td>
      <td>09 In Road - Not Crossing</td>
      <td>7 In Rd Facing Traffic</td>
      <td>1 Pedestrian</td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>1160002980</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>532780</td>
      <td>180410</td>
      <td>1</td>
      <td>1 Driver/Rider</td>
      <td>1 Male</td>
      <td>25-59</td>
      <td>46</td>
      <td>1</td>
      <td>2 Serious</td>
      <td>-2 Unknown</td>
      <td>-2 N/A</td>
      <td>2 Pedal Cycle</td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>1160006347</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>531400</td>
      <td>181570</td>
      <td>3</td>
      <td>2 Passenger</td>
      <td>2 Female</td>
      <td>60+</td>
      <td>61</td>
      <td>1</td>
      <td>3 Slight</td>
      <td>-2 Unknown</td>
      <td>-2 N/A</td>
      <td>4 Car</td>
      <td></td>
    </tr>
    <tr>
      <th>3</th>
      <td>1160006347</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>531400</td>
      <td>181570</td>
      <td>2</td>
      <td>1 Driver/Rider</td>
      <td>1 Male</td>
      <td>60+</td>
      <td>69</td>
      <td>1</td>
      <td>3 Slight</td>
      <td>-2 Unknown</td>
      <td>-2 N/A</td>
      <td>4 Car</td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>1160006347</td>
      <td>CITY OF LONDON</td>
      <td>0</td>
      <td>531400</td>
      <td>181570</td>
      <td>1</td>
      <td>1 Driver/Rider</td>
      <td>1 Male</td>
      <td>16-24</td>
      <td>22</td>
      <td>1</td>
      <td>3 Slight</td>
      <td>-2 Unknown</td>
      <td>-2 N/A</td>
      <td>4 Car</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Erotellaan datasta ikähaarukka, jota tarkastellaan.</span>

<span class="n">alaraja</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">ylaraja</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">ikahaarukka</span> <span class="o">=</span> <span class="n">liikenne</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">liikenne</span><span class="p">[</span><span class="s1">&#39;Driver Age&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">ylaraja</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">liikenne</span><span class="p">[</span><span class="s1">&#39;Driver Age&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">alaraja</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tehdään kuvaaja tämän ikäryhmän onnettomuuksista eri välineillä.</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ikahaarukka</span><span class="p">[</span><span class="s1">&#39;Vehicle Type&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1"># Määritetään tässä miten vaaka-akselin selitteet toimivat. Erityisesti miten ne kallistuvat.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_82_0.png" src="../_images/Ohjeita Pythonin käyttöön_82_0.png" />
</div>
</div>
<p>Kuvaajasta nähdään, että suurin osa liikenneonnettomuuksista on väemmän yllättäen autojen törmäilyä. Pieni yllätys voi kuitenkin tulla siitä, että listassa näkyy myös ratsuhevonen. Tätä voisi lähteä tarkastelemaan syvemminkin, esimerkiksi seuraavasti:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Erotellaan hevostörmäykset liikennedatasta.</span>

<span class="n">hepat</span> <span class="o">=</span> <span class="n">liikenne</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">liikenne</span><span class="p">[</span><span class="s1">&#39;Vehicle Type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;16 Ridden Horse&#39;</span><span class="p">]</span>
<span class="n">hepat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AREFNO</th>
      <th>Borough</th>
      <th>Boro</th>
      <th>Easting</th>
      <th>Northing</th>
      <th>Vehicle Ref.</th>
      <th>Vehicle Type</th>
      <th>Vehicle Type (Banded)</th>
      <th>Vehicle Manoeuvres</th>
      <th>Vehicle Skidding</th>
      <th>...</th>
      <th>Junction Location</th>
      <th>Object in C/W</th>
      <th>Veh. Leaving C/W</th>
      <th>Veh. off C/W</th>
      <th>Veh. Impact</th>
      <th>VJNYPURP DECODED</th>
      <th>Driver Sex</th>
      <th>Driver Age</th>
      <th>Driver Age (Banded)</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>33056</th>
      <td>0116TW60237</td>
      <td>RICHMOND-UPON-THAMES</td>
      <td>24</td>
      <td>518450</td>
      <td>173770</td>
      <td>1</td>
      <td>16 Ridden Horse</td>
      <td>8 Other</td>
      <td>18 Going Ahead Other</td>
      <td>0 No Skidding/Overturn</td>
      <td>...</td>
      <td>2 Jct Cleared</td>
      <td>00 None</td>
      <td>0 Did Not Leave</td>
      <td>00 None</td>
      <td>1 Front Hit First</td>
      <td>1 Jny Part of Work</td>
      <td>1 Male</td>
      <td>25</td>
      <td>25-34</td>
      <td></td>
    </tr>
    <tr>
      <th>33057</th>
      <td>0116TW60237</td>
      <td>RICHMOND-UPON-THAMES</td>
      <td>24</td>
      <td>518450</td>
      <td>173770</td>
      <td>2</td>
      <td>16 Ridden Horse</td>
      <td>8 Other</td>
      <td>18 Going Ahead Other</td>
      <td>0 No Skidding/Overturn</td>
      <td>...</td>
      <td>2 Jct Cleared</td>
      <td>00 None</td>
      <td>0 Did Not Leave</td>
      <td>00 None</td>
      <td>2 Back Hit First</td>
      <td>1 Jny Part of Work</td>
      <td>1 Male</td>
      <td>28</td>
      <td>25-34</td>
      <td></td>
    </tr>
  </tbody>
</table>
<p>2 rows × 21 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Jaha, sama AREFNO, eli hepat ajoivat toistensa perään. Mites vakavaa vammaa tuli?</span>

<span class="n">heppaVammat</span> <span class="o">=</span> <span class="n">loukkaantuneet</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">loukkaantuneet</span><span class="p">[</span><span class="s1">&#39;AREFNO&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0116TW60237&#39;</span><span class="p">]</span>
<span class="n">heppaVammat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Protip: jos haluaa olla helppo suuren datan kanssa, manuaalisen numeronsyötön sijaan tuohon laitettaisiin</span>
<span class="c1"># viite alkuperäisen taulukon heppaosasta kaivetun solun mukaan ja koko prosessi tapahtuisi automaattisesti. </span>
<span class="c1"># Kannattaa kokeilla oman akateemisen mielenkiinnon vuoksi kokeilla.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AREFNO</th>
      <th>Borough</th>
      <th>Boro</th>
      <th>Easting</th>
      <th>Northing</th>
      <th>CREFNO</th>
      <th>Casualty Class</th>
      <th>Casualty Sex</th>
      <th>Casualty Age (Banded)</th>
      <th>Casualty Age</th>
      <th>No. of Casualties</th>
      <th>Casualty Severity</th>
      <th>Ped. Location</th>
      <th>Ped. Movement</th>
      <th>Mode of Travel</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>22096</th>
      <td>0116TW60237</td>
      <td>RICHMOND-UPON-THAMES</td>
      <td>24</td>
      <td>518450</td>
      <td>173770</td>
      <td>1</td>
      <td>1 Driver/Rider</td>
      <td>1 Male</td>
      <td>25-59</td>
      <td>28</td>
      <td>1</td>
      <td>3 Slight</td>
      <td>-2 Unknown</td>
      <td>-2 N/A</td>
      <td>8 Other Vehicle</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Kuvaajien piirtoon liittyen vielä sananen virheistä. Oikeissa mittauksissa on aina heiluntaa sen suhteen, mikä on tarkka tulos ja miten tarkasti jotain edes voidaan mitata. Nämä tarkkuusarvot voidaan kaivaa tilastollisilla prosesseilla tuloksiin tehdyistä sovitteista tai voi olla että ne ovat tiedossa jokaisen mittapisteen kohdalla erikseen, kuten vaikkapa koulussa tehtävien kokeiden kanssa voisi käydä (mikäli virheeseen ehditään paneutua). Tehdään esimerkki tällaisesta.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">satunnaistaja</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)):</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">rand</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">;</span>

<span class="c1"># Luodaan mittapisteet normaalijakautuneesti heiluen.</span>

<span class="n">arvo1</span> <span class="o">=</span> <span class="n">satunnaistaja</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="n">arvo2</span> <span class="o">=</span> <span class="n">satunnaistaja</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>

<span class="c1"># Annetaan kullekin mittapisteelle normaalijakautunut satunnainen virhe.</span>

<span class="n">virhe1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="n">satunnaistaja</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arvo1</span><span class="p">)))</span>
<span class="n">virhe2</span> <span class="o">=</span> <span class="n">satunnaistaja</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arvo2</span><span class="p">)))</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">arvo2</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Mittaukset&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">arvo2</span><span class="p">,</span> <span class="n">xerr</span> <span class="o">=</span> <span class="n">virhe1</span><span class="p">,</span> <span class="n">yerr</span> <span class="o">=</span> <span class="n">virhe2</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span>

<span class="c1"># Lasketaan huvikseen mukaan myös suoran sovite pienimmällä neliösummalla.</span>

<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">arvo2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">arvo1</span><span class="p">,</span> <span class="n">intercept</span> <span class="o">+</span> <span class="n">slope</span><span class="o">*</span><span class="n">arvo1</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sovitus&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Jos haluaisi tietää suoran matemaattisia arvoja, voisi kirjoittaa esim. print (slope) jne.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Ohjeita Pythonin käyttöön_87_0.png" src="../_images/Ohjeita Pythonin käyttöön_87_0.png" />
</div>
</div>
</section>
<section id="animaatioiden-tekeminen">
<h2>7. Animaatioiden tekeminen<a class="headerlink" href="#animaatioiden-tekeminen" title="Permalink to this headline">#</a></h2>
<p>Pythonilla voi tehdä animaatioita monella tavalla. Emme kuitenkaan suosittele plotly-paketin käyttöä Notebookien kanssa, sillä se on niin hidasta ettei mistään tule mitään. Tehdään tässä esimerkki, joka näyttää kivasti miksi enemmän dataa antaa parempia tuloksia.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;http://opendata.cern.ch/record/545/files/Dimuon_DoubleMu.csv&#39;</span><span class="p">)</span>

<span class="n">iMass</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">M</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Määritetään funktio, joka tuottaa kuvamme. Num kertoo monennessako askeleessa mennään ja funktio piirtää joka</span>
<span class="c1"># askeleelle uuden histogrammin.</span>

<span class="k">def</span> <span class="nf">updt_hist</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">iMass</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">8000</span><span class="p">)</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">iMass</span><span class="p">[:</span><span class="n">num</span><span class="o">*</span><span class="mi">480</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">120</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Huom: animaatioita sisältävät solut ovat <em><strong>hitaita</strong></em>. Mitä enemmän kuvia, sitä hitaampaa niiden tekeminen on. Tämä voi viedä useita minuutteja.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tuodaan animaatioita tuottava paketti.</span>

<span class="kn">import</span> <span class="nn">matplotlib.animation</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%capture</span>

<span class="c1"># (Toimii MyBinderissa) Capture-magic on tässä estämässä tätä solua tuottamasta suoraan näkyvää tulosta, jottei outputista puske</span>
<span class="c1"># omituisia tyhjiä kuvia tai muuta turhaa. Se siisteyttää elämää.</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

<span class="c1"># fargs kertoo mitä muuttujia funktio ottaa sisäänsä ja tyhjä kohta kertoo ohjelmalle, että sen on käytettävä</span>
<span class="c1"># kahta muuttujaa. Toiseksi otetaan senhetkinen ruutu.</span>

<span class="n">anim</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">updt_hist</span><span class="p">,</span> <span class="n">frames</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">fargs</span><span class="o">=</span><span class="p">(</span><span class="n">iMass</span><span class="p">,</span> <span class="p">)</span> <span class="p">)</span>

<span class="c1"># anim.to_jshtml() muuttaa animaation (javascript)html:ksi, jolloin Notebook osaa näyttää sen.</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">anim</span><span class="o">.</span><span class="n">to_jshtml</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tämän ajamalla animaatio saadaan sitten näkyväksi, kun se on ohjelman muistissa.</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">anim</span><span class="o">.</span><span class="n">to_jshtml</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="kartat-ja-lampokartat">
<h2>8. Kartat ja lämpökartat<a class="headerlink" href="#kartat-ja-lampokartat" title="Permalink to this headline">#</a></h2>
<p>Interaktiivisia karttoja joihin voi piirtää dataa Notebookeilla? Kyllä kiitos!</p>
<p>Tällaisten tekeminen on helpompaa kuin voisi kuvitella. Tässä esimerkissä nähdään, miten homma toimii kun saatavilla on jotain dataa, joka sisältää leveys- ja pituuspiirikoordinaatteja.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Folium-paketista löydämme karttapohjia.</span>

<span class="kn">import</span> <span class="nn">folium</span>

<span class="c1"># Tiheyttä värein edustava heatmap-systeemi on myös näppärä, joten otetaan se käyttöön.</span>

<span class="kn">from</span> <span class="nn">folium.plugins</span> <span class="kn">import</span> <span class="n">HeatMap</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tässä datassa on jatkuvasti päivittyvät tiedot maanjäristyksistä eri puolella planeettaa viimeisen</span>
<span class="c1"># kuukauden ajalta. Siellä voi olla jo tämäkin päivä.</span>

<span class="n">quakeData</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.csv&#39;</span><span class="p">)</span>
<span class="n">quakeData</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Koska datamme on DataFrame-muodossa, muutamme sen ensin listoiksi, joita HeatMap ymmärtää.</span>

<span class="c1"># Tehdään tarpeeksi pitkä lista, johon voimme tallentaa haluamiamme arvoja.</span>

<span class="n">dat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">quakeData</span><span class="p">)</span>

<span class="c1"># Listaan tulee arvoja (tuples), jotka sisältävät leveyspiirin, pituuspiirin ja järistyksen voimakkuuden.</span>
<span class="c1"># Magnitudia ei sinänsä tarvittaisi, mutta se on mukava olla siellä vaikkapa siltä varalta, että haluaa tarkastella</span>
<span class="c1"># vain tietyn rajan ylittäviä tapauksia.</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">quakeData</span><span class="p">)):</span>
    <span class="n">dat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">quakeData</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">quakeData</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">quakeData</span><span class="p">[</span><span class="s1">&#39;mag&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Siltä varalta, että tiedoissa on mukana sellaisia rivejä, joiden magnitudia ei tiedetä (listattu NaN:ina),</span>
<span class="c1"># poistetaan ne ettei listamme ala käyttäytymään hankalasti.</span>

<span class="n">dat</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dat</span> <span class="k">if</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">])]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Erilaisia karttatyylejä: https://deparkes.co.uk/2016/06/10/folium-map-tiles/</span>
<span class="c1"># world_copy_jump = True mahdollistaa kartan rullauksen sivulle niin, että asiat näkyvät yhä.</span>
<span class="c1"># Jos haluat vain yhden karttalevityksen, lisää argumentti no_wrap = True sulkuihin.</span>
<span class="c1"># Argumentti control_scale lisää karttaan mittakaavan.</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">([</span><span class="mf">15.</span><span class="p">,</span> <span class="o">-</span><span class="mf">75.</span><span class="p">],</span> <span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;openstreetmap&#39;</span><span class="p">,</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">world_copy_jump</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">control_scale</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">HeatMap</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="n">m</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="ongelmia-katso-tanne">
<h2>9. Ongelmia? Katso tänne<a class="headerlink" href="#ongelmia-katso-tanne" title="Permalink to this headline">#</a></h2>
<p>Kooste:</p>
<p>Yhyy, en osaa?<br />
Solu jäi jumiin eikä piirrä kuvaajaani tai aja koodiani?<br />
Virheilmoitus herjaa ‘nimi is not defined’ tai ‘nimi does not exist’?<br />
Yritän tallentaa muuttujaan asioita, mutta print(nimi) kertookin None?<br />
Datani ei suostu lataamaan?<br />
Lataamassani datassa on jotain omituisia ‘NaN’-arvoja?<br />
Yhdistin palasia datasta, mutta nyt en enää pysty tekemään asioita uudella muuttujallani?<br />
Koodini ei toimi, vaikka se on ihan varmasti oikein kirjoitettu?<br />
Datan päivämäärät sekoittavat toiminnan, miten korjaan?<br />
Kopioin datan uuteen muuttujaan, jonka käsittelyn jälkeen huomaan alkuperäisen muuttujan arvojen vaihtuneen?</p>
<section id="yhyy-en-osaa">
<h3>Yhyy, en osaa?<a class="headerlink" href="#yhyy-en-osaa" title="Permalink to this headline">#</a></h3>
<p>Nou hätä, kukaan ei aloita mestarina. Tekemällä oppii ja virheet kuuluvat asiaan.</p>
<p>Pythonissa on kivana puolena sen laaja käyttäjäkunta: mitä ikinä keksitkään kysyä, et ole ensimmäinen ja vastaus luultavasti löytyy ensimmäisten googlaustulosten joukosta. Tässä on ohjeita muutamiin yleisimpiin ongelmatilanteisiin.</p>
</section>
<section id="solu-jai-jumiin-eika-piirra-kuvaajaani-tai-aja-koodiani">
<h3>Solu jäi jumiin eikä piirrä kuvaajaani tai aja koodiani?<a class="headerlink" href="#solu-jai-jumiin-eika-piirra-kuvaajaani-tai-aja-koodiani" title="Permalink to this headline">#</a></h3>
<p>Jos solun ajamisessa kuluu joitain sekunteja pidempään ilman, että sen pitäisi tehdä mitään erityisen raskasta, on mahdollista että koodissa on virheellisesti kirjoitettu jokin silmukka johon koneen lukija jää jumiin. Pysäytä kernelin toiminta ja tarkista koodisi mahdollisten kitkakohtien varalta. Jos et löydä ongelmaa, yksinkertaista syntaksia kunnes olet varma, että palaset etenevät loogisesti haluttuun suuntaan.</p>
<p>Yksi yleinen ongelma on, että syntaksivirhe ajaa koneen tekemään jotain väärää. Esimerkkitapaus: piirrät histogrammia yhdestä isomman datan sarakkeesta, mutta unohdat sarakkeen nimen koodista. Tällöin kone yrittää toteuttaa käskyäsi ja hämmentyy saamastaan koko datan sisältävästä taulukosta. Pysäytä kernelin toiminta ja korjaa muuttujien nimet oikein.</p>
</section>
<section id="virheilmoitus-herjaa-nimi-is-not-defined-tai-nimi-does-not-exist">
<h3>Virheilmoitus herjaa ‘nimi is not defined’ tai ‘nimi does not exist’?<a class="headerlink" href="#virheilmoitus-herjaa-nimi-is-not-defined-tai-nimi-does-not-exist" title="Permalink to this headline">#</a></h3>
<p>Muuttujaa, johon viittaat, ei ole olemassa. Olethan muistanut varmasti ajaa tässä istunnossa sen solun, jossa kyseinen muuttuja määritellään? Muista myös kirjainkoon tarkka merkitys.</p>
</section>
<section id="yritan-tallentaa-muuttujaan-asioita-mutta-print-nimi-kertookin-none">
<h3>Yritän tallentaa muuttujaan asioita, mutta print(nimi) kertookin None?<a class="headerlink" href="#yritan-tallentaa-muuttujaan-asioita-mutta-print-nimi-kertookin-none" title="Permalink to this headline">#</a></h3>
<p>Tallennuksessasi on jokin ongelma. Muista aina tallentaa tekemäsi operaatiot muuttuujaan, eli esimerkiksi</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">muuttuja</span> <span class="o">=</span> <span class="o">...</span> <span class="n">lataus</span> <span class="n">datasta</span>
<span class="n">muuttuja</span> <span class="o">=</span> <span class="n">muuttuja</span><span class="o">*</span><span class="mi">2</span>
</pre></div>
</div>
<p>eikä</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">muuttuja</span> <span class="o">=</span> <span class="o">...</span> <span class="n">lataus</span> <span class="n">datasta</span>
<span class="n">muuttuja</span><span class="o">*</span><span class="mi">2</span>
</pre></div>
</div>
<p>Jos muuttujan tarkasteleminen palauttaa None, tällöin muuttujasi on tyhjä. Tarkasta, että haluamasi operaatio oikeasti on tehtävissä oleva eikä hajoa vaikkapa jonkin sisäfunktion vääriin syötteisiin.</p>
</section>
<section id="datani-ei-suostu-lataamaan">
<h3>Datani ei suostu lataamaan?<a class="headerlink" href="#datani-ei-suostu-lataamaan" title="Permalink to this headline">#</a></h3>
<p>Tavallisia csv- ja vastaavia tekstitiedostoja voi tarkastella tekstinkäsittelyohjelmilla. Tällöin näet, millä merkillä arvot on eroteltu, miltä riviltä relevantti data alkaa tai onko tiedoston sisältö ylipäätään se mitä kuvittelit.</p>
<p>Jakomerkit, otsikkorivit ja vastaavat voit määrittää lukufunktion parametreina, esimerkiksi</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;linkki tiedostoon&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>avaisi puolipisteellä erotetun csv:n. Lisää ylempänä dataa käsittelevässä kappaleessa 3.</p>
<p><strong>pd.read_table()</strong> voi auttaa selvittämään datan luonnetta jos ei jaksa avata tekstieditoria.</p>
<p>Joskus ongelma johtuu merkistöjä ohjaavien koodien yhteensopimattomuudesta. Tällöin parametri <strong>encoding</strong> voi auttaa. Näistä löydät enemmän <a class="reference external" href="https://docs.python.org/3/library/codecs.html#standard-encodings">täältä</a>. Jos oletusasetus ei toimi, usein jokin ISO-variantti kelpaa.</p>
</section>
<section id="lataamassani-datassa-on-jotain-omituisia-nan-arvoja">
<h3>Lataamassani datassa on jotain omituisia ‘NaN’-arvoja?<a class="headerlink" href="#lataamassani-datassa-on-jotain-omituisia-nan-arvoja" title="Permalink to this headline">#</a></h3>
<p>NaN, ‘Not a Number’, kertoo että tässä kohtaa dataa ei ole ymmärrettävää arvoa. Joko arvo on omituinen (kuten negatiivisen luvun neliöjuuri) tai sitä ei vain ole.</p>
<p>Monet funktiot eivät välitä NaN-arvoista tai niiden parametreihin voi laittaa asetuksen, jolla ne eivät huomioi niiden olemassaoloa. Tämä helpottaa etenkin isojen datojen läpikäyntiä, kun kaikkia mahdollisia virheitä ei huomioida eikä kone jumitu törmätessään matemaattiseen mahdottomuuteen.</p>
</section>
<section id="yhdistin-palasia-datasta-mutta-nyt-en-enaa-pysty-tekemaan-asioita-uudella-muuttujallani">
<h3>Yhdistin palasia datasta, mutta nyt en enää pysty tekemään asioita uudella muuttujallani?<a class="headerlink" href="#yhdistin-palasia-datasta-mutta-nyt-en-enaa-pysty-tekemaan-asioita-uudella-muuttujallani" title="Permalink to this headline">#</a></h3>
<p>Yhdistitkö eri tyyppisiä muuttujia? Kokonaisluvut (integer) ovat tietokoneelle erilaisia kuin desimaaleja ymmärtävät liukuluvut (float), jotka ovat erilaisia kuin teksti (string) ja niin edelleen. Joskus numerosarjakin voi olla kirjoitettu johonkin dataan stringinä, mikä on kovasti epämukavaa huomata jälkikäteen. Pythonissa on erilaisia vertailukomentoja, kuten isstring, joilla voi tarkistaa muuttujien tyypin.</p>
<p>Yhdistithän palaset oikeisiin suuntiin? Jos halusit sarakkeet vierekkäin, niitä ei kannata vahingossa liittää peräkkäin yhdeksi pitkäksi sarakkeeksi. Tiedoston tarkastelu vaikkapa <strong>len(nimi)</strong> ja <strong>nimi.head()</strong> komennoilla on usein hyödyllistä näissä tilanteissa.</p>
</section>
<section id="koodini-ei-toimi-vaikka-se-on-ihan-varmasti-oikein-kirjoitettu">
<h3>Koodini ei toimi, vaikka se on ihan varmasti oikein kirjoitettu?<a class="headerlink" href="#koodini-ei-toimi-vaikka-se-on-ihan-varmasti-oikein-kirjoitettu" title="Permalink to this headline">#</a></h3>
<p>Tarkista nyt kuitenkin, ettei ole piste väärässä kohdassa tai väärä kirjainkoko jossakin.</p>
<p>Jos koodi ei ihan oikeasti vaan toimi vaikka pitäisi, syy voi löytyä kerneliin jääneistä aiemmista tiedoista muistissa. Näissä tapauksissa voi välillä vain kokeilla Kernel-valikosta Restart &amp; Clear Outputtia ja uudelleen ajamista vaikka parikin kertaa.</p>
</section>
<section id="datan-paivamaarat-sekoittavat-toiminnan-miten-korjaan">
<h3>Datan päivämäärät sekoittavat toiminnan, miten korjaan?<a class="headerlink" href="#datan-paivamaarat-sekoittavat-toiminnan-miten-korjaan" title="Permalink to this headline">#</a></h3>
<p>Päivämäärät saattavat tulla ilmoitettuina monessa muodossa. Jos oletusasetukset eivät saa dataa toimimaan nätisti, <strong>pd.read_csv():n</strong> <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">dokumentaatiosta</a> näkyy millä sen parametreilla voi vaikuttaa päivämäärien tulkintaan. Esim. <strong>dayfirst</strong> tai <strong>date_parser</strong> saattavat ratkaista ongelman. Pythonissa on myös paketti <a class="reference external" href="https://docs.python.org/3/library/time.html"><strong>time</strong></a>, josta löytyy varmasti sopivat palat tilanteeseen.</p>
</section>
<section id="kopioin-datan-uuteen-muuttujaan-jonka-kasittelyn-jalkeen-huomaan-alkuperaisen-muuttujan-arvojen-vaihtuneen">
<h3>Kopioin datan uuteen muuttujaan, jonka käsittelyn jälkeen huomaan alkuperäisen muuttujan arvojen vaihtuneen?<a class="headerlink" href="#kopioin-datan-uuteen-muuttujaan-jonka-kasittelyn-jalkeen-huomaan-alkuperaisen-muuttujan-arvojen-vaihtuneen" title="Permalink to this headline">#</a></h3>
<p>Python operoi osoittimilla, joissa muuttujaan tallentuu oikeastaan tiedon itsensä sijaan paikkatieto siitä, mistä päin muistia kyseinen tieto löytyy. Kopioitaessa kokonaista datamuuttujaa toiseen muuttujaan yksittäisten rivien tai sarakkeiden sijaan saattaa käydä niin, että siinä ei oikeastaan tehdä muuta kuin viitataan vanhaan tietoon. Jos uudelle muuttujalle tehdään muutoksia, tällöin osoittimet vievät muutokset myös vanhaan dataan ja puf, sekin on muuttunut. Tätä sattuu joskus ja se on hitusen rasittavaa. Olemme huomanneet hyväksi kopioida alkuperäisen:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">uusiNimi</span> <span class="o">=</span> <span class="n">vanhaNimi</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
<p>jolloin oikeasti tehdään uutta tietoa muistiin niin, ettei viittaus vahingossakaan tapahdu alkuperäiseen muuttujaan. Kiinnostavaa kyllä tätä ongelmaa ei tunnu esiintyvän muussa kuin koko datan kerralla siirtämisen yhteydessä, eli yksittäisten rivien erottelu uusiin muuttujiin tapahtuu ilman mitään viittausta alkuperäistietoihin.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./harjoitukset"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="kaverina_python.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Kaverina Python</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="data-analyysi.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Kiinni data-analyysiin</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Juha Teuho<br/>
  
    <div class="extra_footer">
      <div>
<a>Toteutettu Opetushallituksen valtionavustuksella tiedekasvatuksen edistämiseen.</a></br><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="license" alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> Tämän sivuston materiaali on käytettävissä seuraavalla lisenssillä: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY 4.0.</a>
</div>    

    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>